import{a as g,b as j,c as u,d as f}from"./chunk-3N7B2BEL.js";import{A as y,B as L,C as O,D as N,E as T,F as l,G as d,H as D,M as G,N as E,U as p,V as M,W as z,Ya as W,_a as $,ea as H,fb as Z,gb as K,p as A,q as c,u as x,ya as V,z as C}from"./chunk-3JFFBIVT.js";import"./chunk-447CKG3T.js";import"./chunk-7KGURMOZ.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as R,b as w}from"./chunk-JHI3MBHO.js";var B=[{inputs:["Azkena Rock Festival","Azkena Rock","Azkena Rock Fest"],name:"Azkena Rock Festival",location:"Vitoria-Gasteiz",place:"Recinto Ferial de Vitoria-Gasteiz",bands:["Alice Cooper","Corrosion of Conformity","Therapy?","Voivod"]},{inputs:["Be Prog! My Friend","Be Prog My Friend"],name:"Be Prog! My Friend",location:"Barcelona",place:"La Carpa (Poble Espanyol)",bands:["Soen","The Ocean","After Lapse","Agent Fresco","Einar Solberg","Green Carnation","Iotunn","Rendezvous Point","Serapis Project","The Dear Hunter"]},{inputs:["Blastor Metal Fest","Blastor Metal"],name:"Blastor Metal Fest",location:"Valencia",place:"Sala Zul\xFA",bands:["Avulsed","Morfina","Obscure","Radity","Vendetta F.M."]},{inputs:["Catalonia Extreme Gathering Fest","Catalonia Extreme Gathering"],name:"Catalonia Extreme Gathering Fest",location:"Badalona (Barcelona)",place:"Sala Estraperlo",bands:["Arkona","Chaotian","Inferno","Ascendency","Aversio Humanitatis","Cogas","Cryogenic","Curse Upon a Prayer","DET","Fogos","Invernal","Sanctuarium"]},{inputs:["Drums of War","Drums of War Fest"],name:"Drums of War",location:"Barcelona",place:"Atlantic Events",bands:["1349","Destruction","Pestilence","Unleashed","Acheron","Aeternus","Deathhammer","Hellbutcher","Impaled Nazarene","Impiety","In the Woods...","Kampfar","Massacra Legacy","Nargaroth","Negative Plane","Nocturnal","Vinterland","Zemial"]},{inputs:["GinetaRock","Gineta Rock","GinetaRock Fest","Gineta Rock Fest"],name:"GinetaRock",location:"La Gineta (Albacete)",place:"Recinto Sal\xF3n Municipal de La Gineta",bands:["Dirkschneider","Roy Khan","Seven Spires"]},{inputs:["Kabiefest Metal","Kabiefest"],name:"Kabiefest Metal",location:"Santurtzi (Vizcaya)",place:"Sala TBD",bands:["Crimson Glory","Firewind"]},{inputs:["Leyendas del Rock","Leyendas"],name:"Leyendas del Rock",location:"Villena (Alicante)",place:"Polideportivo Municipal de Villena",bands:["Arch Enemy","Helloween","In Flames","Slaughter to Prevail","Against Myself","Aneuma","Ankhara","Black Label Society","Blaze Out","Bolu2 Death","Cabal","Celtibeerian","Chained Saint","Chelsea Grin","Chez Kane","Daeria","Dark Moor","Dark Tranquillity","Dartagnan","Death and Legacy","Deicide","Eihwar","Ekyrian","Employed to Serve","Evo","Fallen at Dawn","Godsmack","Guilt Trip","Hadadanza","Hardline","Heaven Shall Burn","Heleven","Injector","Killus","Latzen","Lepoka","L\xE1ndevir","Mind Driller","Mushroomhead","Northlane","Nothing More","Of Mice & Men","Orbit Culture","Prom Kinks","Salduie","Saratoga","Saurom","Savatage","Sepultura","Signs of the Swarm","Stratovarius","Tailgunner","The Baboon Show","Thunder Mother","Warcry","Wings of Steel","Xeria","ten56."]},{inputs:["Mad Cool","MadCool"],name:"Mad Cool",location:"Villaverde (Madrid)",place:"Iberdrola Music",bands:["Foo Fighters","The Warning","Twenty One Pilots","Pixies","A Perfect Circle","Nick Cave and the Dad Seeds","The Black Crowes"]},{inputs:["O Son Do Camino"],name:"O Son Do Camino",location:"Santiago de Compostela",place:"Monte do Gozo",bands:["Linkin Park"]},{inputs:["Okkult Session","Okkult Session Fest"],name:"Okkult Session",location:"Barcelona",place:"La Carpa (Poble Espanyol)",bands:[]},{inputs:["Primavera Sound Fest","Primavera Sound","Primavera Sound Barcelona","Primavera Sound Fest Barcelona"],name:"Primavera Sound Fest",location:"Barcelona",place:"Parc del F\xF2rum",bands:["Agriculture","Knocked Loose","Kylesa"]},{inputs:["Resurrection Fest","Resurrection"],name:"Resurrection Fest",location:"Viveiro (Lugo)",place:"Complejo deportivo de Lavandeiras",bands:["Iron Maiden","Limp Bizkit","Marilyn Manson","Sabaton","A Day to Remember","A.A. Williams","Aneuma","Angelus Apatrida","Annisokay","Anthrax","Authority Zero","Belvedere","Black Maracas","Blaze the Trail","Bleed from Within","Blood Command","Blood Incantation","Blood Vulture","Blues Pills","Borknagar","Burning Witches","Caliban","Cardiac","Caskets","Cavalera Conspiracy","Ciclonautas","Converge","Crowded","Cwfen","Distant","Dogma","Donuts Hole","Dying Wish","End It","Faetooth","Fallen at Dawn","Family Man","Feuerschwanz","Frontierer","Fuet!","Gaerea","Get the Shot","God Complex","Gridiron","Hamlet","Hand Of Juno","Harm's Way","Her Anxiety","High Vis","House of Protection","Hulder","Imminence","Immortal Disfigurement","Initiate","Iscream Never Ground","Krudd\xF6","LAMPR3A","Last Train","Lionheart","Madmess","Man with a Mission","Mastodon","Mourir","Nevertel","Not Yet","Nukore","Okkultist","Oslo Ovnies","P.O.D.","Pants Off","President","Psychonaut","Return To Dust","Rosalie Cunningham","Self Deception","Stellvris","TSS","Testament","The Browning","The Callous Daoboys","The Funeral Portrait","The Gems","The Pretty Wild","The Rasmus","The Scratch","The Vintage Caravan","Thrown","TodoMal","Trivium","Vulvarine","Witch Club Satan"]},{inputs:["Rock Fest","Rock Fest Barcelona"],name:"Rock Fest",location:"Barcelona",place:"Parc de Can Zam",bands:["Helloween","The Offspring","Twisted Sister","Accept","Bad Religion","Bleed from Within","Blues Pills","Breaking Benjamin","Chino Banzai","D\xFCnedain","Evaristo","Gotthard","Hiraes","Latzen","Los Barones (Tributo Bar\xF3n Rojo)","Loudness","Mot\xF6rhits (Tributo Mot\xF6rhead)","Napalm Death","Orden Ogan","Powerwolf","Primal Fear","Rienda Suelta","Sabaton","Steel Panther","Stingers (Tributo Scorpions)","Tankard","Testament","Tyketto"]},{inputs:["Rock Imperium","Rock Imperium Fest"],name:"Rock Imperium",location:"Cartagena (Murcia)",place:"Parque el Batel",bands:["Iron Maiden","Sabaton","Within Temptation","4 Bajo Zero","Anthrax","Avulsed","Blues Pills","Crazy Lixx","Crimson Glory","Doble Esfera","Dogma","Estrella Negra","Evilact","Grand Magus","H.E.A.T","Hagane","Heleven","Lacuna Coil","Latzen","Mastodon","Presa","Queensr\xFFche","Rockin' Ladies Band","Testament","The Gathering","Triskel","Trivium","Uada","Wings of Steel"]},{inputs:["Rock the Sun"],name:"Rock the Sun",location:"Barcelona",place:"La Carpa (Poble Espanyol)",bands:["Eclipse","Michael Monroe","Chez Kane","Crazy Lixx","Jolly Joker","Kilmara","Lonely Fire","Redshark","The Cruel Intentions","Treat"]},{inputs:["Sevilla Metal Fest"],name:"Sevilla Metal Fest",location:"Sevilla",place:"Sala Supra",bands:["Iron Savior","Invicti","Nidh\xF8gg","Nurcry"]},{inputs:["Sun And Thunder"],name:"Sun And Thunder",location:"Fuengirola (M\xE1laga)",place:"Marenostrum Fuengirola",bands:[]},{inputs:["VikingFest","Viking Fest","VikingFest Sevilla","Viking Fest Sevilla"],name:"VikingFest",location:"La Rinconada (Sevilla)",place:"Recinto Ferial El Abrazo",bands:["Vision Divine","Rise to Fall"]},{inputs:["Winds of Agony","Winds of Agony Fest"],name:"Winds of Agony",location:"Granollers (Barcelona)",place:"Sala Nau B1",bands:["Craft","Hellhammer","Urgehal","Abysmal Lord","Adorior","Ares Kingdom","Arkhaeth","Bloody Vengeance","Caveman Cult","Coscradh","Demoncy","Grave Miasma","Helleruin","Naglfar","Necroracle","Opositor","Pestkraft","Saetaier","Tabula Rasa","Thorybos"]},{inputs:["Z! Live","Z Live","ZLive"],name:"Z! Live",location:"Zamora",place:"IFEZA",bands:["Opeth","Saxon","Twisted Sister","Amh","Brothers of Metal","Burning Witches","Coroner","Crematory","Delalma","Dragony","Ekyrian","Emperor","H.E.A.T","Headon","Krisiun","Latzen","Lepoka","Noah Histeria","Romanthica","Serious Black","Soziedad Alkoholika","Su Ta Gar","TesseracT","Xeria"]},{inputs:["Zurbar\xE1n Rock Fest","Zurbar\xE1n Rock"],name:"Zurbar\xE1n Rock Fest",location:"Burgos",place:"Parque San Agust\xEDn",bands:["Doro","Hardcore Superstar","Heavens Gate","Masters of Ceremony"]}];function ne(r,s){r&1&&(l(0,"p",5),p(1,"Reading..."),d())}function ae(r,s){r&1&&(l(0,"p",5),p(1,"No upcoming concerts found."),d())}function te(r,s){if(r&1&&D(0,"img",7),r&2){let m=E().$implicit;T("src",m.flyer,A)}}function ie(r,s){r&1&&D(0,"div",8)}function oe(r,s){if(r&1&&(l(0,"div",6),C(1,te,1,1,"img",7)(2,ie,1,0,"div",8),l(3,"div",9)(4,"div",10),p(5),d(),l(6,"div",11),p(7),d(),l(8,"div",12),D(9,"img",13),p(10),d(),l(11,"div",14),p(12),d()()()),r&2){let m=s.$implicit,a=E();c(),y(m.flyer?1:2),c(4),M(a.getBands(m)),c(2),M(a.getParsedDate(m)),c(2),T("src",a.getFlagSVG(m.location),A),c(),z(" ",m.location||"Unknown"," "),c(2),M(m.place||"")}}var he=(()=>{let s=class s{constructor(){this.isReading=!1}submit(a){let t=a.target?.files?.[0];if(t){let e=new FileReader;this.isReading=!0,e.onload=n=>{let i=this.getConcertJSONFromICS(n.target.result);this.isReading=!1,this.printEvents(i),this.printLocations(),this.printPlaces(),this.printBands(),this.printFests()},e.readAsText(t)}}getConcertJSONFromICS(a){return a.split("BEGIN:VEVENT").slice(1).map(e=>{let n=o=>{let P=e.match(o);return P?P[1].replace(/\r\n |[\r\n\\]/g,""):null},i=n(/DTSTART(?:;VALUE=DATE)?:(\d{8})/),b=n(/DTEND(?:;VALUE=DATE)?:(\d{8})/),U=n(/CREATED:(\d{8}T\d{6})/),J=n(/LAST-MODIFIED:(\d{8}T\d{6})/),v=n(/SUMMARY:(.+?)\r?\n(?:[A-Z\-]+:|$)/s),Y=n(/LOCATION:(.+?)\r?\n(?:[A-Z\-]+:|$)/s),_=n(/DESCRIPTION:(.+?)\r?\n(?:[A-Z\-]+:|$)/s),q=v?.includes("_"),h=o=>o?o.length===8?new Date(parseInt(o.substring(0,4)),parseInt(o.substring(4,6))-1,parseInt(o.substring(6,8))).toISOString():new Date(parseInt(o.substring(0,4)),parseInt(o.substring(4,6))-1,parseInt(o.substring(6,8)),parseInt(o.substring(9,11)),parseInt(o.substring(11,13)),parseInt(o.substring(13,15))).toISOString():null,S=_?.replace(/<br>\*/g,"n*")?.replace(/<[^>]+>/g,"")?.split("n*")?.map(o=>o.trim()),X=S?.[0]?.includes("http")?S.shift():void 0,F=v?v.split(","):[],k=F[0]?.split("+")?.map(o=>o.replace("_","")?.trim())||[],Q=F[1]?.trim(),ee=F[2]?.trim(),I;return q&&(I=k[0],k=S?.length?S:void 0),{startDate:h(i),endDate:h(b),creationDate:h(U),lastModifiedDate:h(J),bands:k,location:Q||void 0,place:ee||void 0,address:Y||void 0,description:_||void 0,flyer:X,block:e,fest:I}}).filter(e=>e.startDate&&new Date(e.startDate).getTime()>Date.now()).sort((e,n)=>new Date(e.startDate).getTime()-new Date(n.startDate).getTime())}getParsedDate(a){let t=i=>i.toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),e=i=>i.toLocaleDateString("es-ES",{day:"numeric",month:"long"}),n="";return a.startDate&&a.endDate?Math.round((new Date(a.endDate).getTime()-new Date(a.startDate).getTime())/864e5)>1?n=`${e(new Date(a.startDate))} \u2013 ${e(new Date(a.endDate))} ${new Date(a.endDate).getFullYear()}`:n=t(new Date(a.startDate)):a.startDate&&(n=t(new Date(a.startDate))),n}getFlagSVG(a){let t="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Flag_of_Spain.svg/750px-Flag_of_Spain.svg.png?20240115205409",e=u.find(n=>[...n.inputs,n.name].includes(a));return e?.community?j[e.community]:t}getBands(a){return a?.fest||a?.bands?.join(" + ")||"unknown"}printEvents(a){this.concerts=a?.map(t=>w(R({},t),{bands:t.bands?.map(e=>g.find(n=>n.inputs.includes(e))?.name||(e.includes("TBC")?e:e+"_NEW_")),location:u.find(e=>e.inputs.includes(t.location||""))?.name||t.location+"_NEW_",place:f.find(e=>e.inputs.includes(t.place||""))?.name||(t.place?.includes("TBC")?t.place:t.place+"_NEW_")})),console.log("EVENTS",this.concerts)}printLocations(){let a=new Set;u.map(e=>a.add(e.name)),this.concerts?.forEach(e=>a.add(e.location));let t=Array.from(a).sort((e,n)=>e.localeCompare(n)).map(e=>u?.find(n=>n.name===e||n.inputs.includes(e))||{inputs:[e],name:e,community:"_NEW_"}).reduce((e,n)=>(e.some(i=>i.name===n.name)||e.push(n),e),[]);console.log("LOCATIONS",t)}printPlaces(){let a=new Set;f.map(e=>a.add(`${e.name};${e.location}`)),this.concerts?.forEach(e=>{e.place&&!e.place.includes("TBC")&&a.add(`${e.place};${e.location}`)});let t=Array.from(a).sort((e,n)=>e.localeCompare(n)).map(e=>f?.find(n=>n.name===e.split(";")[0]||n.inputs.includes(e.split(";")[0]))||{inputs:[e.split(";")[0]],name:e.split(";")[0]+"_NEW_",location:u.find(n=>n.inputs.includes(e.split(";")[1]))?.name||e.split(";")[1]}).reduce((e,n)=>(e.some(i=>i.name===n.name)||e.push(n),e),[]);console.log("PLACES",t)}printBands(){let a=new Set;g.map(e=>a.add(e.name)),this.concerts?.forEach(e=>e.bands?.forEach(n=>!n.includes("TBC")&&a.add(n)));let t=Array.from(a).sort((e,n)=>e.localeCompare(n)).map(e=>g?.find(n=>n.name===e||n.inputs.includes(e))||{inputs:[e],name:e+"_NEW_",genres:[]}).reduce((e,n)=>(e.some(i=>i.name===n.name)||e.push(n),e),[]);console.log("BANDS",t)}printFests(){let a=new Set;B.map(e=>a.add(`${e.name};${e.location};${e.place}`)),this.concerts?.forEach(e=>e.fest&&a.add(`${e.fest};${e.location};${e.place}`));let t=Array.from(a).sort((e,n)=>e.localeCompare(n)).map(e=>{let n=B?.find(i=>i.name===e.split(";")[0]||i.inputs.includes(e.split(";")[0]));return{inputs:n?.inputs||[e.split(";")[0]],name:n?.name||e.split(";")[0]+"_NEW_",location:u.find(i=>i.inputs.includes(e.split(";")[1]))?.name||e.split(";")[1],place:f.find(i=>i.inputs.includes(e.split(";")[2]))?.name||e.split(";")[2],bands:this.concerts?.find(i=>i.fest===e.split(";")[0])?.bands?.map(i=>g.find(b=>b.inputs.includes(i))?.name||i)||[]}}).reduce((e,n)=>(e.some(i=>i.name===n.name)||e.push(n),e),[]);console.log("FESTS",t)}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=x({type:s,selectors:[["app-ics"]],decls:12,vars:3,consts:[[3,"translucent"],[1,"ion-padding"],["id","controls"],["type","file","id","fileInput","accept",".ics",3,"change"],["id","output"],[1,"no-events"],[1,"card"],["alt","Flyer",1,"flyer",3,"src"],[1,"flyer"],[1,"card-content"],[1,"bands"],[1,"date"],[1,"location"],["alt","flag",1,"flag",3,"src"],[1,"place"]],template:function(t,e){t&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),p(3,"Conciertos de Heavy Metal en Espa\xF1a"),d()()(),l(4,"ion-content",1)(5,"div",2)(6,"input",3),G("change",function(i){return e.submit(i)}),d()(),l(7,"div",4),C(8,ne,2,0,"p",5),C(9,ae,2,0,"p",5),O(10,oe,13,6,"div",6,L),d()()),t&2&&(T("translucent",!0),c(8),y(e.isReading?8:-1),c(),y(e.concerts?-1:9),c(),N(e.concerts))},dependencies:[W,$,Z,K,H,V],styles:["body[_ngcontent-%COMP%]{font-family:system-ui,sans-serif;background-color:#f5f7fa;margin:0;padding:2rem;color:#333}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:4rem}#controls[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-bottom:2rem}input[type=file][_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:1rem;padding:.5rem 1rem}#output[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem}.card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;box-shadow:0 4px 12px #0000001a;overflow:hidden;display:flex;flex-direction:column;transition:transform .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.flyer[_ngcontent-%COMP%]{width:100%;height:220px;object-fit:cover;background:#ddd}.card-content[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:.5rem}.bands[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#222}.date[_ngcontent-%COMP%]{color:#555;font-weight:500}.location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#333;font-weight:500}.flag[_ngcontent-%COMP%]{width:20px;height:14px;border-radius:2px;object-fit:cover;border:1px solid #ccc}.place[_ngcontent-%COMP%]{font-style:italic;color:#666}.no-events[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#777;margin-top:2rem}"]});let r=s;return r})();export{he as IcsPage};
